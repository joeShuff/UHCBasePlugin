# UHCBasePlugin
UHCBase is a plugin for Spigot Minecraft servers to control a game of UHC (Ultra Hardcore).

# Installation
Download the latest version for your minecraft version from the releases section. When later versions of Minecraft release, I will begin further development in that version only, so any bugs won't be fixed for older versions of Minecraft.

Current Version
[AWAITING TESTING FOR FIRST BUILD]

# Playing Instructions
At the absolute minimum, there are 2 commands that need to be ran to start your UHC.

`/prepuhc <worldborder diameter>` 
This command will do all the world preparation it needs and then spread the players/teams out randomly in the world. (See config for instructions for teams/solo spreading)

`/start-uhc`
This command kicks it all off, a countdown of 10 seconds will be following by the Ender Dragons roar kicking off the UHC.

# Terminology
Throughout the description of how to use this plugin I will use some concepts that could be interpreted in a few ways. This defines the way **this** plugin understands these concepts to hopefully clear up any confusion.

### Episode
Internally an episode is really just a "unit of time", defined by the config item `episode-length`. Most events in the UHC that are triggered by time are configured in terms of episodes. So if you want the world border to shrink after 40 minutes, you can set an `episode-length` of 40 minutes and a `shrink-ep` of 2.

*Episode 1 starts immediately as the UHC starts so configuring events to happen at Episode 1 will happen right away* 

### Perma Day
Perma day is a timed event that sets the time to 0 and disables the game rule `doDaylightCycle`. When this happens can be configured using `perma-day-ep` config item.

### Grace Period
Grace period is a time when PVP is disabled on all worlds (overworld, nether and end). When `grade-end-ep` epsode is reached, PVP is enabled and announced to the world. To disable this set `grace-end-ep` to 1 or less. (Setting to 1 would end grace period immediately anyway, so it just disables it)

### World Border
Whilst you might not want a world border in your world it is crucial for this plugin to know how far to spread players around 0,0. Once the UHC has started an operator can manually remove the world border if they wish. You can disable shrinking by setting `shrink-ep` to 0 or less.

### Spectating
This plugin refers to "spectating" as a player being allowed into the live game worlds in spectator mode. If `can-spectate` is set to true, when a player dies they will be set into spectator mode to watch the rest of the game. (Unless kicked, see `seconds-until-kick`)

# Customise your UHC
This UHC plugin comes with support for custom "skinning" so to speak. Take a look inside the `customize.yml` file and you will find you can change some of the messages that the players will see. All [color coding](https://minecraft.fandom.com/wiki/Formatting_codes) supported using the `ยง` character.

Info about options coming soon 

# Config Setup
It is **strongly** advised that you take a look through all the config files before you run a UHC to make sure the settings will be right for you.

| Item                 | Config File  | Default                   | Description                                                                                                                                                                                                                                           | Dynamic?                                                                                                                                                                                                                                         |
|----------------------|--------------|---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `episode-length`     | `config.yml` | 20                        | This is the time in minutes that an _episode_ lasts. See **Terminology** above for definitions.                                                                                                                                                       | Can be changed up until the UHC starts, once you run that `start-uhc` command, its set for good.                                                                                                                                                 |
| `perma-day-ep`       | `config.yml` | 5                         | This is the episode that _perma day_ will take effect. Set to 0 to disable _perma day_.                                                                                                                                                               | Can be changed up until the UHC starts, once you run that `start-uhc` command, its set for good.                                                                                                                                                 |
| `shrink-ep`          | `config.yml` | 3                         | This is the episode that the world border will begin shrinking. Set to 0 to disable border shrink.                                                                                                                                                    | Can be changed up until the UHC starts, once you run that `start-uhc` command, its set for good.                                                                                                                                                 |
| `shrink-size`        | `config.yml` | 100                       | The diameter to shrink the world border too. e.g. 100 will mean the border will be at +-50x/z.                                                                                                                                                        | Can be changed up until the UHC starts, once you run that `start-uhc` command, its set for good.                                                                                                                                                 |
| `shrink-time`        | `config.yml` | 60                        | The time in minutes that the world border will shrink to `shrink-size`.                                                                                                                                                                               | Can be changed up until the UHC starts, once you run that `start-uhc` command, its set for good.                                                                                                                                                 |
| `show-episodes`      | `config.yml` | `true`                    | As mentioned in **Terminology** episodes are key to the timing system, however, setting this to false will completely hide any reference to episodes. Giving the illusion it is one long UHC. _Note_ All config will still need to consider episodes. | Can be changed up until the UHC starts, once you run that `start-uhc` command, its set for good.                                                                                                                                                 |
| `grace-end-episode`  | `config.yml` | 2                         | This is the episode that a _grace period_ will end. Set to 0 if you want to disable the grace period.                                                                                                                                                 | Can be changed up until the UHC starts, once you run that `start-uhc` command, its set for good.                                                                                                                                                 |
| `UHCWorld`           | `config.yml` | world                     | **IMPORTANT ONE** This NEEDS to be the name of your **UHC overworld** world folder. To test if its all setup properly, see the command `/worldtest`.                                                                                                  | No. This needs to be set pre-plugin loading. If you need to change it, you will need to run `/reload` to reload the plugin.                                                                                                                      |
| `hubWorld`           | `config.yml` | hub                       | **IMPORTANT ONE** This NEEDS to be the name of your **hub** world folder. To test if its all setup properly, see the command `/worldtest`. Currently, the plugin requires a hub world to be seperate to ANY game worlds.                              | No. This needs to be set pre-plugin loading. If you need to change it, you will need to run `/reload` to reload the plugin.                                                                                                                      |
| `hubCentreX`         | `config.yml` | 0                         | This is the X coordinate of the spawn location in your hub world. When a player joins pre-game they will spawn here and if a player dies when `can-spectate` is false, they will respawn here after death.                                            | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `hubCentreY`         | `config.yml` | 0                         | This is the Y coordinate of the spawn location in your hub world. When a player joins pre-game they will spawn here and if a player dies when `can-spectate` is false, they will respawn here after death.                                            | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `hubCentreZ`         | `config.yml` | 0                         | This is the Z coordinate of the spawn location in your hub world. When a player joins pre-game they will spawn here and if a player dies when `can-spectate` is false, they will respawn here after death.                                            | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `teams`              | `config.yml` | `true`                    | This determines whether the UHC will be played in teams, it is used to randomly spread players in their teams and for tracking deaths to see when a whole team is eliminated.                                                                         | Can be changed up until the UHC starts, once you run that `start-uhc` command, its set for good.                                                                                                                                                 |
| `friendly-fire`      | `config.yml` | `true`                    | This sets whether the teams have friendly fire turned on or not.                                                                                                                                                                                      | This can be changed **BEFORE** teams have been generated, once a team is generated it sets friendly fire on or off depending on this. You _can_ remove teams, change this value then regenerate teams or use the minecraft command to change it. |
| `nether-enabled`     | `config.yml` | `true`                    | This sets whether the nether can be travelled to or not. If `false`, nether portals can't be lit or travelled through when going TO the nether, returning from the nether is unrestricted.                                                            | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `end-enabled`        | `config.yml` | `false`                   | This sets whether the end can be travelled to or not. If `false`, end portals can't travelled through when going TO the end, returning from the end is unrestricted.                                                                                  | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `apple-rate`         | `config.yml` | 1.0                       | This is the chance that an apple will drop when you break a leaf block, in %.                                                                                                                                                                         | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `pearl-rate`         | `config.yml` | 100.0                     | This is the chance that an ender pearl will drop when you kill an enderman, in %.                                                                                                                                                                     | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `death-lightning`    | `config.yml` | `false`                   | This is whether a lightning bolt will strike when someone dies on their place of death.                                                                                                                                                               | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `fall-damage`        | `config.yml` | `true`                    | Whether the players take fall damage or not.                                                                                                                                                                                                          | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `pearl-damage`       | `config.yml` | `true`                    | Whether the players take damage when they teleport by ender pearl or not.                                                                                                                                                                             | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `absorbtion`         | `config.yml` | `true`                    | Whether absorbtion hearts are allowed or not. If `false` absorbtion hearts are removed immediately.                                                                                                                                                   | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `seconds-until-kick` | `config.yml` | 0                         | How long after death until the player is automatically kicked from the server. Set to 0 to not kick.                                                                                                                                                  | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `can-spectate`       | `config.yml` | `true`                    | Whether a player can spectate the game after death or not. If `true` they are immediately put in spectator mode at their death spot, else they are teleported to the hub world to chill.                                                              | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
| `rules`              | `rules.yml`  | Be nice, Be kind, Be mine | The rules for this game. It is shown to all players when the UHC starts and whenever someone runs `/rules`. Comma separated.                                                                                                                          | Yes. Whenever this is changed in the config and saved, the changes are effective immediately.                                                                                                                                                    |
